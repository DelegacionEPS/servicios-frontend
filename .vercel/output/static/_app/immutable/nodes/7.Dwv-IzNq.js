import{r as Pe}from"../chunks/index.g5YcAAdQ.js";import{s as Ne,w as fe,e as O,y as Ee,c as D,b as N,f as g,L as ye,I as Ve,i as z,h as p,V as we,W as oe,o as ie,n as Ie,N as He,H as ze,z as Be,x as Ae,t as Y,d as J,X as me,j as Re,p as Le,u as je,q as Ge,r as Ue,C as ce,Y as We,k as Xe,a as T,g as F,m as x,F as de,l as Ye}from"../chunks/scheduler.4BRz1ZoI.js";import{S as qe,i as Me,t as E,g as Je,a as y,c as Ke,d as w,e as I,m as B,f as A}from"../chunks/index.D9gzXkG9.js";import{L as ge,I as ae,B as ue,e as _e}from"../chunks/forms.CetWpLbR.js";import{e as Se}from"../chunks/each.D6YF6ztN.js";import{g as Qe,t as Ze}from"../chunks/bundle-mjs.BCsCVHDx.js";import{T as et,a as xe}from"../chunks/Tabs.DPHwpmO8.js";import{p as tt}from"../chunks/stores.DIdhbrzr.js";function Oe(s,e,t){const a=s.slice();return a[0]=e[t].value,a[17]=e[t].name,a}function De(s){let e,t;return{c(){e=O("option"),t=Y(s[2]),this.h()},l(a){e=D(a,"OPTION",{});var r=N(e);t=J(r,s[2]),r.forEach(g),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",me(e,e.__value)},m(a,r){z(a,e,r),p(e,t)},p(a,r){r&4&&Re(t,a[2])},d(a){a&&g(e)}}}function Te(s){let e;const t=s[10].default,a=Le(t,s,s[9],null);return{c(){a&&a.c()},l(r){a&&a.l(r)},m(r,n){a&&a.m(r,n),e=!0},p(r,n){a&&a.p&&(!e||n&512)&&je(a,t,r,r[9],e?Ue(t,r[9],n,null):Ge(r[9]),null)},i(r){e||(E(a,r),e=!0)},o(r){y(a,r),e=!1},d(r){a&&a.d(r)}}}function Fe(s){let e,t=s[17]+"",a,r;return{c(){e=O("option"),a=Y(t),this.h()},l(n){e=D(n,"OPTION",{});var l=N(e);a=J(l,t),l.forEach(g),this.h()},h(){e.__value=r=s[0],me(e,e.__value)},m(n,l){z(n,e,l),p(e,a)},p(n,l){l&2&&t!==(t=n[17]+"")&&Re(a,t),l&2&&r!==(r=n[0])&&(e.__value=r,me(e,e.__value))},d(n){n&&g(e)}}}function at(s){let e,t,a,r,n=s[2]&&De(s),l=Se(s[1]),i=[];for(let o=0;o<l.length;o+=1)i[o]=Fe(Oe(s,l,o));let c=null;l.length||(c=Te(s));let b=[s[4],{class:s[3]}],k={};for(let o=0;o<b.length;o+=1)k=fe(k,b[o]);return{c(){e=O("select"),n&&n.c(),t=Ee();for(let o=0;o<i.length;o+=1)i[o].c();c&&c.c(),this.h()},l(o){e=D(o,"SELECT",{class:!0});var m=N(e);n&&n.l(m),t=Ee();for(let u=0;u<i.length;u+=1)i[u].l(m);c&&c.l(m),m.forEach(g),this.h()},h(){ye(e,k),s[0]===void 0&&Ve(()=>s[14].call(e))},m(o,m){z(o,e,m),n&&n.m(e,null),p(e,t);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);c&&c.m(e,null),"value"in k&&(k.multiple?we:oe)(e,k.value),e.autofocus&&e.focus(),oe(e,s[0],!0),a||(r=[ie(e,"change",s[14]),ie(e,"change",s[11]),ie(e,"contextmenu",s[12]),ie(e,"input",s[13])],a=!0)},p(o,[m]){if(o[2]?n?n.p(o,m):(n=De(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null),m&514){l=Se(o[1]);let u;for(u=0;u<l.length;u+=1){const q=Oe(o,l,u);i[u]?i[u].p(q,m):(i[u]=Fe(q),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=l.length,!l.length&&c?c.p(o,m):l.length?c&&(Je(),y(c,1,1,()=>{c=null}),Ke()):(c=Te(o),c.c(),E(c,1),c.m(e,null))}ye(e,k=Qe(b,[m&16&&o[4],{class:o[3]}])),m&24&&"value"in k&&(k.multiple?we:oe)(e,k.value),m&3&&oe(e,o[0])},i:Ie,o:Ie,d(o){o&&g(e),n&&n.d(),He(i,o),c&&c.d(),a=!1,ze(r)}}}const nt="block w-full";function rt(s,e,t){const a=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=Be(e,a),{$$slots:n={},$$scope:l}=e,{items:i=[]}=e,{value:c=void 0}=e,{placeholder:b="Choose option ..."}=e,{underline:k=!1}=e,{size:o="md"}=e,{defaultClass:m="text-gray-900 disabled:text-gray-400 bg-gray-50 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:disabled:text-gray-500 dark:focus:ring-primary-500 dark:focus:border-primary-500"}=e,{underlineClass:u="text-gray-500 disabled:text-gray-400 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:disabled:text-gray-500 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const q={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let C;function X(d){ce.call(this,s,d)}function S(d){ce.call(this,s,d)}function h(d){ce.call(this,s,d)}function R(){c=We(this),t(0,c),t(1,i)}return s.$$set=d=>{t(16,e=fe(fe({},e),Ae(d))),t(4,r=Be(e,a)),"items"in d&&t(1,i=d.items),"value"in d&&t(0,c=d.value),"placeholder"in d&&t(2,b=d.placeholder),"underline"in d&&t(5,k=d.underline),"size"in d&&t(6,o=d.size),"defaultClass"in d&&t(7,m=d.defaultClass),"underlineClass"in d&&t(8,u=d.underlineClass),"$$scope"in d&&t(9,l=d.$$scope)},s.$$.update=()=>{t(3,C=Ze(nt,k?u:m,q[o],k&&"!px-0",e.class))},e=Ae(e),[c,i,b,C,r,k,o,m,u,l,n,X,S,h,R]}class st extends qe{constructor(e){super(),Me(this,e,rt,at,Ne,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const lt=async({parent:s,data:e})=>{var r,n,l;const{session:t}=await s();let a=e.authorizedEmails??[];if(a.includes((r=t==null?void 0:t.user)==null?void 0:r.email)===-1||!((n=t==null?void 0:t.user)!=null&&n.email)||a.includes((l=t==null?void 0:t.user)==null?void 0:l.email)===!1)throw Pe(302,"/");return{session:t,authorizedEmails:a}},Bt=Object.freeze(Object.defineProperty({__proto__:null,load:lt},Symbol.toStringTag,{value:"Module"}));function ot(s){let e;return{c(){e=Y("NIA")},l(t){e=J(t,"NIA")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function it(s){let e;return{c(){e=Y("Selecciona un rol")},l(t){e=J(t,"Selecciona un rol")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function ut(s){let e;return{c(){e=Y("Cambiar rol")},l(t){e=J(t,"Cambiar rol")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function ct(s){var ne,V,te,re,se;let e,t,a,r,n,l,i,c,b,k,o,m,u,q,C,X,S,h,R,d,M,ee,P;return r=new ge({props:{class:"w-4/5 m-auto text-xl text-[#3BC4A0]",$$slots:{default:[ot]},$$scope:{ctx:s}}}),l=new ae({props:{type:"text",id:"NIA_add",name:"NIA_add",placeholder:"NIA del usuario...",pattern:"100[0-9]{6}",required:!0,class:"w-4/5 m-auto"}}),b=new ge({props:{class:"text-xl w-auto text-[#3BC4A0]",$$slots:{default:[it]},$$scope:{ctx:s}}}),o=new st({props:{class:"mt-2 w-1/5",id:"rol_add",name:"rol_add",items:s[2],required:!0,placeholder:"Rol"}}),u=new ae({props:{type:"hidden",id:"nia_admin",name:"nia_admin",value:(te=(V=(ne=s[0].session)==null?void 0:ne.user)==null?void 0:V.email)==null?void 0:te.split("@")[0]}}),C=new ae({props:{type:"hidden",id:"nombre_admin",name:"nombre_admin",value:(se=(re=s[0].session)==null?void 0:re.user)==null?void 0:se.name}}),h=new ue({props:{type:"submit",class:"bg-[#3BC4A0] text-white mt-8 px-8 py-2 text-xl hover:bg-[#3BB4A0] dark:bg-dark-primary dark:hover:bg-dark-accent",$$slots:{default:[ut]},$$scope:{ctx:s}}}),{c(){e=O("form"),t=O("div"),a=O("div"),w(r.$$.fragment),n=T(),w(l.$$.fragment),i=T(),c=O("div"),w(b.$$.fragment),k=T(),w(o.$$.fragment),m=T(),w(u.$$.fragment),q=T(),w(C.$$.fragment),X=T(),S=O("div"),w(h.$$.fragment),R=T(),d=O("div"),this.h()},l(_){e=D(_,"FORM",{action:!0,method:!0});var v=N(e);t=D(v,"DIV",{class:!0});var K=N(t);a=D(K,"DIV",{});var L=N(a);I(r.$$.fragment,L),n=F(L),I(l.$$.fragment,L),L.forEach(g),K.forEach(g),i=F(v),c=D(v,"DIV",{class:!0});var j=N(c);I(b.$$.fragment,j),k=F(j),I(o.$$.fragment,j),j.forEach(g),m=F(v),I(u.$$.fragment,v),q=F(v),I(C.$$.fragment,v),X=F(v),S=D(v,"DIV",{class:!0});var G=N(S);I(h.$$.fragment,G),R=F(G),d=D(G,"DIV",{}),N(d).forEach(g),G.forEach(g),v.forEach(g),this.h()},h(){x(t,"class","grid grid-cols-1"),x(c,"class","w-screen grid grid-cols-1 mt-4 place-items-center"),x(S,"class","w-screen grid grid-cols-1 place-items-center"),x(e,"action","?/addUserRol"),x(e,"method","post")},m(_,v){z(_,e,v),p(e,t),p(t,a),B(r,a,null),p(a,n),B(l,a,null),p(e,i),p(e,c),B(b,c,null),p(c,k),B(o,c,null),p(e,m),B(u,e,null),p(e,q),B(C,e,null),p(e,X),p(e,S),B(h,S,null),p(S,R),p(S,d),M=!0,ee||(P=de(_e.call(null,e)),ee=!0)},p(_,v){var $,Q,U,Z,W;const K={};v&16&&(K.$$scope={dirty:v,ctx:_}),r.$set(K);const L={};v&16&&(L.$$scope={dirty:v,ctx:_}),b.$set(L);const j={};v&1&&(j.value=(U=(Q=($=_[0].session)==null?void 0:$.user)==null?void 0:Q.email)==null?void 0:U.split("@")[0]),u.$set(j);const G={};v&1&&(G.value=(W=(Z=_[0].session)==null?void 0:Z.user)==null?void 0:W.name),C.$set(G);const f={};v&16&&(f.$$scope={dirty:v,ctx:_}),h.$set(f)},i(_){M||(E(r.$$.fragment,_),E(l.$$.fragment,_),E(b.$$.fragment,_),E(o.$$.fragment,_),E(u.$$.fragment,_),E(C.$$.fragment,_),E(h.$$.fragment,_),M=!0)},o(_){y(r.$$.fragment,_),y(l.$$.fragment,_),y(b.$$.fragment,_),y(o.$$.fragment,_),y(u.$$.fragment,_),y(C.$$.fragment,_),y(h.$$.fragment,_),M=!1},d(_){_&&g(e),A(r),A(l),A(b),A(o),A(u),A(C),A(h),ee=!1,P()}}}function ft(s){let e;return{c(){e=Y("Hacer una copia de seguridad")},l(t){e=J(t,"Hacer una copia de seguridad")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function mt(s){let e;return{c(){e=Y("Eliminar la base de datos")},l(t){e=J(t,"Eliminar la base de datos")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function dt(s){let e;return{c(){e=Y("Selecciona el archivo de la base de datos")},l(t){e=J(t,"Selecciona el archivo de la base de datos")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function gt(s){let e;return{c(){e=Y("Restaurar la copia de seguridad del archivo subido")},l(t){e=J(t,"Restaurar la copia de seguridad del archivo subido")},m(t,a){z(t,e,a)},d(t){t&&g(e)}}}function _t(s){var _,v,K,L,j,G;let e,t="Administrar la Base de Datos",a,r,n,l,i,c,b,k,o,m,u,q,C,X,S,h,R,d,M,ee,P,ne,V,te,re,se;return i=new ae({props:{type:"hidden",required:!0,id:"email_admin",name:"email_admin",value:(v=(_=s[1])==null?void 0:_.user)==null?void 0:v.email}}),b=new ue({props:{type:"submit",class:"w-full1 bg-green-500 hover:bg-[#FF6D2E] dark:bg-dark-primary dark:hover:bg-dark-accent",$$slots:{default:[ft]},$$scope:{ctx:s}}}),u=new ae({props:{type:"hidden",required:!0,id:"email_admin",name:"email_admin",value:(L=(K=s[1])==null?void 0:K.user)==null?void 0:L.email}}),C=new ue({props:{type:"submit",class:"w-full1 bg-red-500 hover:bg-[#FF6D2E] dark:bg-red-500 dark:hover:bg-dark-accent",$$slots:{default:[mt]},$$scope:{ctx:s}}}),R=new ge({props:{class:"text-xl w-auto text-[#3BC4A0]",$$slots:{default:[dt]},$$scope:{ctx:s}}}),M=new ae({props:{type:"file",id:"file",name:"file",accept:".db3",required:!0,class:"w-4/5 m-auto my-4",enctype:"multipart/form-data"}}),P=new ae({props:{type:"hidden",id:"nia_admin",name:"nia_admin",value:(G=(j=s[0].session)==null?void 0:j.user)==null?void 0:G.email}}),V=new ue({props:{type:"submit",class:"w-full1 bg-green-500 hover:bg-[#FF6D2E] dark:bg-dark-primary dark:hover:bg-dark-accent",$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){e=O("h2"),e.textContent=t,a=T(),r=O("section"),n=O("section"),l=O("form"),w(i.$$.fragment),c=T(),w(b.$$.fragment),k=T(),o=O("section"),m=O("form"),w(u.$$.fragment),q=T(),w(C.$$.fragment),X=T(),S=O("section"),h=O("form"),w(R.$$.fragment),d=T(),w(M.$$.fragment),ee=T(),w(P.$$.fragment),ne=T(),w(V.$$.fragment),this.h()},l(f){e=D(f,"H2",{class:!0,"data-svelte-h":!0}),Ye(e)!=="svelte-7brgb5"&&(e.textContent=t),a=F(f),r=D(f,"SECTION",{class:!0});var $=N(r);n=D($,"SECTION",{});var Q=N(n);l=D(Q,"FORM",{action:!0,method:!0});var U=N(l);I(i.$$.fragment,U),c=F(U),I(b.$$.fragment,U),U.forEach(g),Q.forEach(g),k=F($),o=D($,"SECTION",{});var Z=N(o);m=D(Z,"FORM",{action:!0,method:!0,class:!0});var W=N(m);I(u.$$.fragment,W),q=F(W),I(C.$$.fragment,W),W.forEach(g),Z.forEach(g),X=F($),S=D($,"SECTION",{class:!0});var le=N(S);h=D(le,"FORM",{action:!0,method:!0,enctype:!0,class:!0});var H=N(h);I(R.$$.fragment,H),d=F(H),I(M.$$.fragment,H),ee=F(H),I(P.$$.fragment,H),ne=F(H),I(V.$$.fragment,H),H.forEach(g),le.forEach(g),$.forEach(g),this.h()},h(){x(e,"class","text-primary dark:text-gray-300 text-center text-4xl font-montserrat"),x(l,"action","?/BackupDB"),x(l,"method","post"),x(m,"action","?/DeleteDB"),x(m,"method","post"),x(m,"class","mt-8"),x(h,"action","?/RestoreDB2"),x(h,"method","POST"),x(h,"enctype","multipart/form-data"),x(h,"class","mt-8"),x(S,"class","hidden"),x(r,"class","grid grid-rows-3 place-items-center mt-8")},m(f,$){z(f,e,$),z(f,a,$),z(f,r,$),p(r,n),p(n,l),B(i,l,null),p(l,c),B(b,l,null),p(r,k),p(r,o),p(o,m),B(u,m,null),p(m,q),B(C,m,null),p(r,X),p(r,S),p(S,h),B(R,h,null),p(h,d),B(M,h,null),p(h,ee),B(P,h,null),p(h,ne),B(V,h,null),te=!0,re||(se=[de(_e.call(null,l)),de(_e.call(null,m))],re=!0)},p(f,$){var he,$e,be,ve,ke,Ce;const Q={};$&2&&(Q.value=($e=(he=f[1])==null?void 0:he.user)==null?void 0:$e.email),i.$set(Q);const U={};$&16&&(U.$$scope={dirty:$,ctx:f}),b.$set(U);const Z={};$&2&&(Z.value=(ve=(be=f[1])==null?void 0:be.user)==null?void 0:ve.email),u.$set(Z);const W={};$&16&&(W.$$scope={dirty:$,ctx:f}),C.$set(W);const le={};$&16&&(le.$$scope={dirty:$,ctx:f}),R.$set(le);const H={};$&1&&(H.value=(Ce=(ke=f[0].session)==null?void 0:ke.user)==null?void 0:Ce.email),P.$set(H);const pe={};$&16&&(pe.$$scope={dirty:$,ctx:f}),V.$set(pe)},i(f){te||(E(i.$$.fragment,f),E(b.$$.fragment,f),E(u.$$.fragment,f),E(C.$$.fragment,f),E(R.$$.fragment,f),E(M.$$.fragment,f),E(P.$$.fragment,f),E(V.$$.fragment,f),te=!0)},o(f){y(i.$$.fragment,f),y(b.$$.fragment,f),y(u.$$.fragment,f),y(C.$$.fragment,f),y(R.$$.fragment,f),y(M.$$.fragment,f),y(P.$$.fragment,f),y(V.$$.fragment,f),te=!1},d(f){f&&(g(e),g(a),g(r)),A(i),A(b),A(u),A(C),A(R),A(M),A(P),A(V),re=!1,ze(se)}}}function pt(s){let e,t,a,r;return e=new xe({props:{open:!0,title:"Cambiar Rol",class:"hover:text-[#3BC4A0] dark:hover:text-dark-accent dark:text-dark-accent",inactiveClasses:"text-gray-500 hover:text-[#3BC4A0] p-4 dark:hover:text-dark-accent",$$slots:{default:[ct]},$$scope:{ctx:s}}}),a=new xe({props:{open:!0,title:"Base de Datos",class:"hover:text-[#3BC4A0] dark:hover:text-dark-accent dark:text-dark-accent",inactiveClasses:"text-gray-500 hover:text-[#3BC4A0] p-4 dark:hover:text-dark-accent",$$slots:{default:[_t]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment),t=T(),w(a.$$.fragment)},l(n){I(e.$$.fragment,n),t=F(n),I(a.$$.fragment,n)},m(n,l){B(e,n,l),z(n,t,l),B(a,n,l),r=!0},p(n,l){const i={};l&17&&(i.$$scope={dirty:l,ctx:n}),e.$set(i);const c={};l&19&&(c.$$scope={dirty:l,ctx:n}),a.$set(c)},i(n){r||(E(e.$$.fragment,n),E(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&g(t),A(e,n),A(a,n)}}}function ht(s){let e,t;return e=new et({props:{tabStyle:"underline",contentClass:"p-4",class:"px-8",$$slots:{default:[pt]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(a){I(e.$$.fragment,a)},m(a,r){B(e,a,r),t=!0},p(a,[r]){const n={};r&19&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){A(e,a)}}}function $t(s,e,t){let a,r;Xe(s,tt,i=>t(3,r=i));const n=[{value:"escuela",name:"Escuela"},{value:"atencion",name:"AtenciÃ³n"},{value:"general",name:"General"}];let{data:l}=e;return setTimeout(()=>{var i;console.log((i=a==null?void 0:a.user)==null?void 0:i.email)},1e3),s.$$set=i=>{"data"in i&&t(0,l=i.data)},s.$$.update=()=>{s.$$.dirty&8&&t(1,a=r.data.session)},[l,a,n,r]}class At extends qe{constructor(e){super(),Me(this,e,$t,ht,Ne,{data:0})}}export{At as component,Bt as universal};
